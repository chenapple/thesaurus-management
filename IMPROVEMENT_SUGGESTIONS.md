# 词库管理应用 - 优化建议清单

> 整体评分：8.5/10 ⭐⭐⭐⭐
> 评估日期：2026-01-02

---

## 一、当前优势总结

| 方面 | 评价 | 说明 |
|------|------|------|
| 架构设计 | ⭐⭐⭐⭐⭐ | Tauri 2 + Vue 3 + Rust，跨平台、高性能、轻量 |
| 功能完整性 | ⭐⭐⭐⭐⭐ | 词根管理、排名监控、知识库、AI分析一体化 |
| 数据安全 | ⭐⭐⭐⭐⭐ | 本地SQLite + 系统密钥链存储API Key |
| AI集成 | ⭐⭐⭐⭐⭐ | 支持4家AI服务商（DeepSeek/OpenAI/Gemini/千问） |
| 自动化 | ⭐⭐⭐⭐ | 定时调度、并发检测、批量处理 |
| 用户体验 | ⭐⭐⭐⭐ | Element Plus UI、快捷键、深色主题 |

---

## 二、优化建议列表

### 优先级 1：用户体验优化（高价值 + 易实现）

#### 1.1 首次启动配置向导
- [x] **状态**：已完成 ✅
- **现状**：用户需要自己找到设置页面配置 API Key
- **建议**：首次启动时弹出配置向导，引导用户完成必要配置
- **具体内容**：
  - 检测是否已配置 DeepSeek 和千问 API Key
  - 未配置时显示欢迎向导对话框
  - 分步引导：1) 欢迎介绍 → 2) DeepSeek配置 → 3) 千问配置 → 4) 完成
  - 提供"跳过"和"稍后配置"选项
- **复杂度**：低
- **文件**：`src/components/SetupWizardDialog.vue`, `src/App.vue`

#### 1.2 功能状态提示
- [x] **状态**：已完成 ✅
- **现状**：未配置 API Key 时，功能按钮可点击但会报错
- **建议**：未配置时显示禁用状态 + 悬浮提示
- **具体内容**：
  - AI分类按钮：未配置 DeepSeek 时显示 "请先配置 DeepSeek API Key"
  - 智能分析按钮：未配置 DeepSeek 时显示禁用 + 提示
  - 向量化按钮：未配置千问/DeepSeek 时显示禁用 + 提示
  - 知识库问答：未配置任何 AI 时显示警告提示
- **复杂度**：低
- **文件**：`src/App.vue`, `src/components/KnowledgeBaseTab.vue`

#### 1.3 错误信息优化
- [x] **状态**：已完成 ✅
- **现状**：错误信息技术性强，如 "API request failed: 401"
- **建议**：转换为用户友好的提示
- **具体内容**：
  - 401 → "API Key 无效，请检查配置"
  - 429 → "请求过于频繁，请稍后重试"
  - 网络错误 → "网络连接失败，请检查网络"
  - 超时 → "请求超时，请重试"
- **复杂度**：低
- **文件**：`src/error-utils.ts`（新建）, `src/ai-service.ts`, `src/deepseek.ts`

---

### 优先级 2：功能增强（中等价值）

#### 2.1 数据统计仪表板
- [x] **状态**：已完成 ✅
- **现状**：首页直接进入功能页面，无全局概览
- **建议**：添加仪表板首页，展示关键指标
- **具体内容**：
  - 4个指标卡片（关键词/词根/排名监控/知识库）
  - 排名监控概览（Top10/Top30/广告位）
  - 流量级别分布（大词/中词/小词）
  - 最近优化事件（最近5条）
- **复杂度**：中
- **文件**：`src/components/DashboardTab.vue`, `src/App.vue`

#### 2.2 批量文档上传
- [x] **状态**：已完成 ✅
- **现状**：知识库一次只能上传一个文件
- **建议**：支持拖拽多文件批量上传
- **具体内容**：
  - ~~拖拽区域支持多文件~~（文件选择器已支持多选）
  - 显示上传队列和进度
  - 支持取消单个文件
  - 上传完成后批量向量化
- **复杂度**：中
- **文件**：`src/components/KnowledgeBaseTab.vue`

#### 2.3 导出报告功能
- [ ] **状态**：待开发
- **现状**：只能导出原始数据
- **建议**：一键生成排名变化报告
- **具体内容**：
  - 选择时间范围
  - 生成排名趋势图表
  - 标注重要变化事件
  - 导出为 PDF 或 Excel
- **复杂度**：中
- **文件**：新建导出报告组件

#### 2.4 文档更新检测
- [ ] **状态**：待开发
- **现状**：重新上传同名文件会创建新文档
- **建议**：检测同名文件，提示覆盖或保留
- **具体内容**：
  - 上传时检查是否存在同名文档
  - 弹窗询问：覆盖 / 保留两个 / 取消
  - 覆盖时保留原文档ID，更新内容
- **复杂度**：中
- **文件**：`src/components/KnowledgeBaseTab.vue`, `src-tauri/src/knowledge_base.rs`

---

### 优先级 3：高级功能（高价值但复杂）

#### 3.1 使用教程/帮助系统
- [ ] **状态**：待开发
- **现状**：无内置帮助，用户需要自己摸索
- **建议**：添加交互式教程或帮助文档
- **具体内容**：
  - 首次使用某功能时显示简短提示
  - 帮助按钮打开功能说明
  - 可选的新手引导流程
- **复杂度**：中
- **文件**：多个组件

#### 3.2 答案重排序 (Re-ranking)
- [x] **状态**：已完成 ✅
- **现状**：知识库搜索结果直接返回 Top N
- **建议**：用 LLM 对搜索结果重排序
- **具体内容**：
  - 向量搜索返回 Top 50
  - 用 AI 评估相关性并重排
  - 取最相关的 8 条传给 LLM
- **复杂度**：低
- **文件**：`src/components/KnowledgeBaseTab.vue`

#### 3.3 多轮追问优化
- [ ] **状态**：待开发
- **现状**：每次提问都重新检索知识库
- **建议**：识别追问场景，复用上轮检索结果
- **具体内容**：
  - 分析用户问题是否为追问
  - 追问时复用上轮文档上下文
  - 减少不必要的检索开销
- **复杂度**：高
- **文件**：`src/components/KnowledgeBaseTab.vue`

#### 3.4 Agent 工具调用
- [ ] **状态**：长期规划
- **现状**：知识库 AI 只能回答文档内容
- **建议**：让 AI 能调用应用内其他功能
- **具体内容**：
  - 定义工具接口（查排名、查关键词等）
  - AI 识别意图并调用对应工具
  - 返回结构化结果
- **复杂度**：高
- **文件**：多个文件，需要 Agent 框架

---

### 优先级 4：技术优化

#### 4.1 减少 Python 依赖
- [ ] **状态**：长期规划
- **现状**：爬虫依赖 Python + Playwright
- **建议**：考虑纯 Rust 实现或 WebView 方案
- **复杂度**：高

#### 4.2 代理池管理
- [ ] **状态**：待评估
- **现状**：单一代理或无代理
- **建议**：支持多代理轮换，避免 IP 封禁
- **复杂度**：中

#### 4.3 数据库性能优化
- [ ] **状态**：待评估
- **现状**：SQLite 单文件
- **建议**：大数据场景考虑分表或迁移 PostgreSQL
- **复杂度**：高

---

## 三、已完成的优化

### v0.6.9 (2026-01-02)
- [x] 数据统计仪表板 - 添加概览首页，展示关键指标
  - 4个指标卡片（关键词/词根/排名监控/知识库）
  - 排名监控概览（Top10/Top30/广告位）
  - 流量级别分布（大词/中词/小词）
  - 最近优化事件（最近5条）
  - 点击卡片可跳转到对应功能页面

### v0.6.8 (2026-01-02)
- [x] 答案重排序 (Re-ranking) - 使用 LLM 对检索结果重新评估相关性
  - 混合检索返回 Top 50 候选结果
  - LLM 评估每个候选与问题的相关性
  - 选取最相关的 8 条作为上下文
  - 提升回答质量，减少无关内容干扰

### v0.6.7 (2026-01-02)
- [x] 批量文档上传 - 支持多文件批量上传，带进度显示和取消功能
  - 上传队列对话框，实时显示每个文件状态
  - 支持取消单个/全部任务
  - 自动处理重复文件覆盖
  - 每个文件独立进行：解析→分块→向量化

### v0.6.6 (2026-01-02)
- [x] 错误信息优化 - 将技术性错误信息转换为用户友好提示
  - 新增 `src/error-utils.ts` 统一错误处理工具
  - HTTP 状态码映射（401→API Key无效、429→请求过于频繁等）
  - 网络错误、超时、配额不足等常见问题友好提示

### v0.6.5 (2026-01-02)
- [x] 首次启动配置向导 - 引导新用户配置 DeepSeek 和千问 API Key
- [x] 功能状态提示 - API Key 未配置时按钮禁用并显示提示

### v0.6.4 (2026-01-02)
- [x] 混合检索 (Hybrid Search) - 向量 + 关键词双重搜索
- [x] 对话标题自动生成 - AI 自动生成对话摘要
- [x] 文档预览抽屉 - 点击文档查看详情和分块
- [x] 移除硬编码 API Key - 安全修复

---

## 四、推荐实施顺序

| 序号 | 功能 | 价值 | 复杂度 | 建议 |
|------|------|------|--------|------|
| 1 | ~~首次启动配置向导~~ | ⭐⭐⭐⭐⭐ | 低 | **已完成** ✅ |
| 2 | ~~功能状态提示~~ | ⭐⭐⭐⭐ | 低 | **已完成** ✅ |
| 3 | ~~错误信息优化~~ | ⭐⭐⭐ | 低 | **已完成** ✅ |
| 4 | ~~批量文档上传~~ | ⭐⭐⭐ | 中 | **已完成** ✅ |
| 5 | ~~答案重排序~~ | ⭐⭐⭐ | 低 | **已完成** ✅ |
| 6 | ~~数据统计仪表板~~ | ⭐⭐⭐⭐ | 中 | **已完成** ✅ |
| 7 | 使用教程/帮助 | ⭐⭐⭐ | 中 | 后续 |
| 8 | Agent 工具调用 | ⭐⭐⭐⭐⭐ | 高 | 长期 |

---

## 五、备注

- **必须配置的 API Key**：
  - DeepSeek：词根分析、关键词分类
  - 千问 (Qwen)：向量化、OCR识别

- **可选配置的 API Key**：
  - OpenAI：知识库问答备选
  - Gemini：知识库问答备选、图片识别备选

---

*最后更新：2026-01-02*

# Amazon Listing 优化功能规划

## 目标
综合分析关键词、竞品文案、评论等数据，打造符合 A9、COSMO、Rufus 算法的优质 Listing。

---

## 核心设计：两种使用场景

> ⚠️ **重要**: 功能设计需要从一开始就区分这两种场景，它们的输入、流程、输出都不同。

### 场景一：新品打造

**适用于**: 新品上架，从零开始创建 Listing

```
┌─────────────────────────────────────────────────┐
│  新品打造流程                                    │
├─────────────────────────────────────────────────┤
│                                                 │
│  输入:                                          │
│  ├── 竞品 ASIN x 3-5                           │
│  ├── 目标关键词                                 │
│  └── 产品基本信息（可选）                        │
│                                                 │
│  分析:                                          │
│  ├── 竞品标题结构                               │
│  ├── 竞品五点卖点                               │
│  ├── 竞品关键词布局                             │
│  └── 评论/Q&A 洞察                              │
│                                                 │
│  输出:                                          │
│  ├── 🆕 全新标题（多个版本可选）                 │
│  ├── 🆕 全新五点描述                            │
│  ├── 🆕 全新商品描述                            │
│  └── 🆕 后台关键词建议                          │
│                                                 │
└─────────────────────────────────────────────────┘
```

### 场景二：老品优化

**适用于**: 优化现有 Listing，提升转化率和排名

```
┌─────────────────────────────────────────────────┐
│  老品优化流程                                    │
├─────────────────────────────────────────────────┤
│                                                 │
│  输入:                                          │
│  ├── 🔴 我的 ASIN（必填）                       │
│  ├── 竞品 ASIN x 3-5                           │
│  └── 目标关键词                                 │
│                                                 │
│  分析:                                          │
│  ├── 获取我的现有文案                           │
│  ├── 获取竞品文案                               │
│  ├── 对比分析差距                               │
│  │   ├── 我缺少了哪些关键词？                   │
│  │   ├── 我的卖点表达是否清晰？                 │
│  │   ├── 竞品有哪些我没提到的场景？             │
│  │   └── 结构/排版有什么问题？                  │
│  └── 评论/Q&A 洞察                              │
│                                                 │
│  输出:                                          │
│  ├── 📊 原文案 vs 优化文案 对比视图             │
│  ├── 📝 逐条修改建议 + 修改原因                 │
│  ├── ✅ 保留原有品牌调性                        │
│  └── 🎯 优先级排序（影响最大的改动优先）         │
│                                                 │
└─────────────────────────────────────────────────┘
```

### 场景对比

| 对比项 | 新品打造 | 老品优化 |
|--------|----------|----------|
| 我的 ASIN | 不需要 | **必填** |
| 竞品 ASIN | 3-5 个 | 3-5 个 |
| 输出形式 | 全新生成 | 对比+建议 |
| AI 任务 | 创作 | 分析+改进 |
| 品牌调性 | 用户定义 | 保留原有 |

### UI 入口设计

```
┌─────────────────────────────────────────────────┐
│  创建 Listing 优化项目                           │
├─────────────────────────────────────────────────┤
│                                                 │
│  项目名称: [________________________]           │
│                                                 │
│  目标市场: [US ▼]                               │
│                                                 │
│  📌 选择场景:                                   │
│  ┌─────────────────┐  ┌─────────────────┐      │
│  │  🆕 新品打造     │  │  🔧 老品优化     │      │
│  │                 │  │                 │      │
│  │  从零开始创建    │  │  优化现有Listing │      │
│  │  全新的Listing   │  │  提升转化和排名  │      │
│  └─────────────────┘  └─────────────────┘      │
│                                                 │
│  ─────────────────────────────────────────────  │
│                                                 │
│  [老品优化时显示]                                │
│  我的 ASIN: [B0__________]  [获取]              │
│                                                 │
│  竞品 ASIN:                                     │
│  ├── [B0__________] 头部竞品    [获取]          │
│  ├── [B0__________] 直接竞品    [获取]          │
│  ├── [B0__________] 直接竞品    [获取]          │
│  └── [+ 添加竞品]                               │
│                                                 │
│              [开始分析]                          │
│                                                 │
└─────────────────────────────────────────────────┘
```

---

## 一、现有功能

- [x] **关键词分析** - 搜索词、排名、搜索量监控

---

## 二、计划增加的分析模块

### 2.1 竞品 Listing 文案分析
**目标算法**: A9 + COSMO

| 分析项 | 说明 | 用途 | 优先级 |
|-------|------|------|--------|
| 标题结构 | 品牌词、核心词、属性词、场景词的排列 | 学习优秀标题写法 | MVP |
| 五点描述 | 提取卖点、痛点解决方案、使用场景 | 优化 Bullet Points | MVP |
| 商品描述 | Description 区域文案 | 补充关键词和卖点 | MVP |
| 关键词布局 | 哪些词出现在标题/五点/描述中 | 关键词埋词策略 | MVP |
| A+内容结构 | 图文结构、卖点呈现方式 | A+内容参考 | 后期 |

> **决定**: A+ 内容以图片为主，AI 识别成本高且不稳定，MVP 阶段先跳过，聚焦文字部分。

**数据来源**: 竞品 ASIN 的 Listing 页面

#### 竞品数量
- **推荐数量**: 3-5 个
- 3个能形成对比，发现共性规律
- 5个足够覆盖不同类型，超过5个边际收益递减

#### 竞品选择策略
| 类型 | 数量 | 说明 |
|------|------|------|
| 头部竞品 | 1-2个 | BSR 排名最高，代表市场标杆 |
| 直接竞品 | 1-2个 | 价格、功能相近，真正抢客户的对手 |
| 新锐竞品 | 1个 | 近期上升快，可能有创新打法 |

#### 数据获取方式
**方案**: Playwright 爬虫（复用现有关键词监控的基础设施）

```
用户输入 ASIN + 站点
    ↓
调用 Python 爬虫脚本
    ↓
打开亚马逊商品页面
    ↓
提取数据：
├── 标题 (Title)
├── 五点描述 (Bullet Points)
├── 商品描述 (Description)
├── 价格 (Price)
├── 评分/评论数 (Rating/Reviews)
└── BSR 排名
    ↓
返回结构化数据 → 存入数据库
```

**页面元素定位**:
```python
# 标题
title = page.locator('#productTitle').text_content()

# 五点描述
bullets = page.locator('#feature-bullets li').all_text_contents()

# 商品描述
description = page.locator('#productDescription').text_content()

# 价格
price = page.locator('.a-price .a-offscreen').first.text_content()

# 评分
rating = page.locator('#acrPopover').get_attribute('title')

# 评论数
reviews = page.locator('#acrCustomerReviewText').text_content()
```

---

### 2.2 评论分析
**目标算法**: COSMO + Rufus

| 分析项 | 说明 | 用途 |
|-------|------|------|
| 高频词提取 | 买家真实使用的词汇 | 贴近用户语言 |
| 使用场景 | 买家实际用途 | COSMO 场景关联优化 |
| 痛点分析 | 差评中的问题 | 规避问题、突出优势 |
| 爽点分析 | 好评中的亮点 | 强化卖点 |
| 竞品提及 | 买家提到的竞品或替代品 | 竞争分析 |

**数据来源**: 竞品评论、自己产品评论

#### 评论获取策略

**核心逻辑**: 差评数量少但价值高 → 全部获取；好评数量多但同质化 → 抽样即可

| 星级 | 获取策略 | 上限 | 原因 |
|------|----------|------|------|
| 5星 ⭐⭐⭐⭐⭐ | 近2年 100条 | 100条 | 数量多，抽样足够了解爽点 |
| 4星 ⭐⭐⭐⭐ | 近2年 100条 | 100条 | 数量多，抽样足够 |
| 3星 ⭐⭐⭐ | 近2年 **全部** | 200条 | 数量少，中立意见有参考价值 |
| 2星 ⭐⭐ | 近2年 **全部** | 200条 | 数量少，痛点信息珍贵 |
| 1星 ⭐ | 近2年 **全部** | 200条 | 数量少，**痛点是金矿** |

- **时间限制**: 近2年（确保时效性，老评论可能已过时）
- **单个竞品上限**: 最多 800 条评论
- **5个竞品上限**: 最多 4000 条评论

#### AI 分析方法

使用 AI 直接分析（方案 A），Prompt 设计：

```python
REVIEW_ANALYSIS_PROMPT = """
你是一位亚马逊 Listing 优化专家。请分析以下 {count} 条产品评论，提取关键洞察。

## 评论内容
{reviews}

## 请输出以下分析结果（JSON 格式）

{
  "usage_scenarios": ["场景1", "场景2", ...],  // 用户使用场景
  "praise_points": ["卖点1", "卖点2", ...],    // 好评关键词
  "pain_points": ["痛点1", "痛点2", ...],      // 差评关键词
  "competitor_mentions": ["竞品1", ...],       // 提到的竞品
  "high_frequency_words": ["词1", "词2", ...], // 高频描述词
  "insights": "综合洞察总结..."                 // 200字总结
}
"""
```

---

### 2.3 Q&A 分析
**目标算法**: Rufus

| 分析项 | 说明 | 用途 |
|-------|------|------|
| 高频问题 | 买家最关心什么 | 预设 Q&A 内容 |
| 产品顾虑 | 购买前的疑虑 | 在文案中消除顾虑 |
| 功能澄清 | 规格、兼容性等技术问题 | 完善产品描述 |

**数据来源**: 竞品 Q&A 页面

#### Q&A 获取策略

Q&A 数量通常较少（几十到几百条），全部获取：

```
获取所有 Q&A（近2年，上限 200 条）
├── 问题内容
├── 回答内容（取点赞最高的回答）
└── 问题投票数（表示关注度）
```

#### AI 分析方法

```python
QA_ANALYSIS_PROMPT = """
请分析以下产品 Q&A，提取关键洞察。

## Q&A 内容
{qa_list}

## 请输出以下分析结果（JSON 格式）

{
  "question_categories": {
    "specs": ["问题1", ...],        // 规格参数类
    "compatibility": ["问题1", ...], // 兼容性类
    "usage": ["问题1", ...],         // 使用方法类
    "after_sales": ["问题1", ...]    // 售后服务类
  },
  "top_concerns": ["问题1", "问题2", ...],  // 高频问题 Top 10
  "unanswered_needs": ["需求1", ...],       // 未被很好回答的问题
  "insights": "综合洞察总结..."
}
"""
```

---

### 2.4 搜索意图分析
**目标算法**: COSMO

| 分析项 | 说明 | 用途 |
|-------|------|------|
| 搜索建议词 | 亚马逊搜索框自动补全 | 长尾词挖掘 |
| 相关搜索 | 搜索结果页底部推荐词 | 关联词拓展 |
| 意图分类 | 信息型/交易型/导航型 | 匹配用户意图 |

#### 数据来源：复用现有关键词模块

> ⚠️ **重要**: 不需要重新爬取，直接调用现有的关键词监控数据！

```
┌─────────────────────────────────────────────────┐
│  关键词数据来源                                  │
├─────────────────────────────────────────────────┤
│                                                 │
│  1. 现有关键词视图 ✅ 已有                       │
│     ├── 用户已添加的监控关键词                   │
│     ├── 搜索量、排名数据                        │
│     └── 搜索意图分析结果                        │
│                                                 │
│  2. 新增爬取（可选）                             │
│     ├── 搜索建议词（自动补全）                   │
│     └── 相关搜索词（搜索结果页底部）             │
│                                                 │
└─────────────────────────────────────────────────┘
```

---

### 2.5 关键词数据整合（重要原则）

> ⚠️ **架构原则**: 所有需要分析/学习关键词的地方，都可以调用现有关键词视图的数据！

#### 可复用的现有数据

| 现有功能 | 可提供的数据 | 用于 Listing 优化 |
|----------|--------------|-------------------|
| 关键词监控 | 搜索量、排名、趋势 | 选择高价值关键词埋入文案 |
| 搜索意图分析 | 意图分类结果 | 匹配用户搜索意图 |
| 竞品排名 | 竞品在各关键词的排名 | 分析竞品关键词策略 |

#### 关键词在各模块的应用

```
┌─────────────────────────────────────────────────┐
│  关键词数据流向                                  │
├─────────────────────────────────────────────────┤
│                                                 │
│  现有关键词视图                                  │
│       │                                         │
│       ▼                                         │
│  ┌─────────────┐                               │
│  │ 关键词池    │ ←── 用户选择要优化的关键词      │
│  └─────────────┘                               │
│       │                                         │
│       ├──→ 2.1 竞品文案分析                     │
│       │    检查竞品是否使用了这些关键词          │
│       │                                         │
│       ├──→ 2.2 评论分析                         │
│       │    检查买家是否使用了这些关键词          │
│       │                                         │
│       ├──→ 2.4 搜索意图分析                     │
│       │    复用现有意图分析结果                  │
│       │                                         │
│       └──→ 3.x AI 优化输出                      │
│            确保关键词合理分布在标题/五点/描述    │
│                                                 │
└─────────────────────────────────────────────────┘
```

---

## 三、AI 优化输出

综合以上数据，AI 生成优化建议。

> ⚠️ **重要原则**: 每个 AI 生成的建议都必须附带**理由说明**，让用户知道为什么这样建议。

### 3.0 输出格式要求

每个优化建议都需要包含：
1. **建议内容** - 具体的文案/关键词
2. **理由说明** - 为什么这样建议
3. **数据来源** - 基于哪些分析得出

示例输出格式：
```
┌─────────────────────────────────────────────────┐
│  标题建议 #1                                     │
├─────────────────────────────────────────────────┤
│                                                 │
│  📝 建议内容:                                    │
│  "XXX品牌 便携榨汁机 户外露营随身杯 USB充电 ..."  │
│                                                 │
│  💡 理由说明:                                    │
│  1. "便携榨汁机" - 核心词，搜索量 12,000/月      │
│  2. "户外露营" - 场景词，5个竞品中4个使用        │
│  3. "USB充电" - 评论高频词，出现 89 次           │
│                                                 │
│  📊 数据来源:                                    │
│  - 关键词分析: 搜索量排名                        │
│  - 竞品分析: B0XXX, B0YYY, B0ZZZ                │
│  - 评论分析: 5星评论高频词                       │
│                                                 │
└─────────────────────────────────────────────────┘
```

### 3.1 标题优化
- 推荐结构：`[品牌] + [核心词] + [场景] + [属性]`
- 基于竞品标题分析 + 关键词数据
- **每个词的选择都要说明理由**

### 3.2 五点描述优化
1. **解决痛点** - 基于差评分析，说明来自哪些差评
2. **核心卖点** - 基于好评高频词，说明出现频次
3. **使用场景** - 基于 COSMO 场景关联，说明竞品使用情况
4. **规格参数** - 基于 Q&A 高频问题，说明问题热度
5. **售后保障** - 建立信任

### 3.3 后台关键词建议
- 主词、长尾词、场景词组合
- 避免与前台重复
- **每个关键词说明搜索量和选择理由**

### 3.4 Rufus 优化建议
- 预设 Q&A 内容建议，说明基于哪些高频问题
- 评论引导话术，说明针对哪些卖点

---

## 四、讨论记录

### 4.1 已决定事项

1. **两种使用场景** ⭐ 核心设计
   - [x] **新品打造**: 竞品分析 → 全新生成 Listing
   - [x] **老品优化**: 我的ASIN + 竞品分析 → 对比优化建议
   - 从一开始就需要设计两种不同的流程和 UI

2. **A+ 内容分析**
   - [x] MVP 阶段跳过，后期再做
   - 原因：图片为主，AI 识别成本高且不稳定

3. **竞品数量**
   - [x] 3-5 个竞品
   - 策略：头部竞品 1-2 个 + 直接竞品 1-2 个 + 新锐竞品 1 个

4. **数据获取方式**
   - [x] 使用 Playwright 爬虫
   - 原因：复用现有关键词监控基础设施，无需额外 API 授权

5. **评论获取策略**
   - [x] 分层抽样 + 时间限制
   - 5星/4星：近2年各取100条（好评多，抽样即可）
   - 3星/2星/1星：近2年全部获取，上限200条（差评少但价值高）
   - 单个竞品上限 800 条，5个竞品上限 4000 条

6. **Q&A 获取策略**
   - [x] 近2年全部获取，上限 200 条
   - 获取：问题、最高赞回答、投票数

7. **AI 分析方式**
   - [x] 方案 A：AI 直接分析原始文本
   - 评论 → 提取场景/爽点/痛点/竞品提及/高频词
   - Q&A → 问题分类/高频问题/未解答需求

8. **关键词数据整合** ⭐ 架构原则
   - [x] 复用现有关键词视图的数据，不重复爬取
   - [x] 搜索意图分析直接调用现有结果
   - [x] 用户可从关键词池选择要优化的目标关键词
   - [x] 所有分析模块都可以引用关键词池数据

9. **Tab 名称**
   - [x] **智能文案**
   - 位置：在知识库标签页前面

10. **AI 输出必须带理由** ⭐ UX 原则
    - [x] 每个建议都要说明**为什么**这样建议
    - [x] 标注数据来源（来自哪个分析模块）
    - [x] 让用户理解 AI 的决策逻辑，建立信任

11. **项目管理**
    - [x] 项目永久保存到本地数据库
    - [x] 支持按类型筛选（新品打造/老品优化）
    - [x] 支持手动删除项目
    - [x] 支持搜索项目名称

### 4.2 待讨论问题

1. **分析优先级**
   - [ ] 先做哪个模块？（竞品文案 / 评论 / Q&A / 搜索意图）
   - [ ] MVP 版本包含哪些功能？

2. **AI 模型选择**
   - [ ] 使用现有 API（OpenAI/Gemini）？
   - [ ] 是否需要微调？

3. **数据存储**
   - [ ] 本地存储还是云端？
   - [ ] 历史数据保留策略？

4. **UI 设计**
   - [ ] 新建独立 Tab 还是集成到现有模块？
   - [ ] 分析结果如何展示？

---

## 五、实现进度

### 5.1 基础框架（已完成）

| 模块 | 状态 | 备注 |
|------|------|------|
| 智能文案 Tab | ✅ 已完成 | 放在知识库前面 |
| 场景选择 UI | ✅ 已完成 | 新品打造 / 老品优化 两个场景卡片 |
| 项目管理 | ✅ 已完成 | 创建、列表、删除项目 |
| 数据库表设计 | ✅ 已完成 | sc_projects, sc_competitors, sc_reviews, sc_qa, sc_analysis_results |
| Tauri API | ✅ 已完成 | 项目 CRUD 接口 |
| 前端 API | ✅ 已完成 | TypeScript 封装 |

### 5.2 数据采集（进行中）

| 模块 | 状态 | 备注 |
|------|------|------|
| 竞品 ASIN 添加 | ✅ 已完成 | 用户输入 ASIN + 选择竞品类型（头部/直接/新锐） |
| 竞品管理 UI | ✅ 已完成 | 项目详情页，添加/删除/修改竞品类型 |
| 竞品文案爬取 | ✅ 已完成 | Playwright 爬虫获取标题/五点/描述/价格/评分/BSR |
| 评论爬取 | ⏳ 待开发 | 分层抽样策略 |
| Q&A 爬取 | ⏳ 待开发 | 全部获取 |

### 5.3 AI 分析（待开发）

| 模块 | 状态 | 备注 |
|------|------|------|
| 关键词分析 | ✅ 已完成 | 现有功能，可复用 |
| 竞品文案分析 | ⏳ 待开发 | AI 分析标题/五点/描述 |
| 评论分析 | ⏳ 待开发 | 提取场景/爽点/痛点 |
| Q&A 分析 | ⏳ 待开发 | 问题分类/高频问题 |
| AI 优化输出 | ⏳ 待开发 | 生成 Listing + 理由说明 |

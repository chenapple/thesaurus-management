/**
 * 亚马逊广告优化指南数据
 *
 * 添加新内容：在对应分类的 tips 数组中添加新条目即可
 * 添加新分类：在 AD_TIPS 数组中添加新的 AdTipCategory
 */

export interface AdTip {
  id: string;
  title: string;
  content: string;  // 支持 Markdown
}

export interface AdTipCategory {
  id: string;
  name: string;
  icon: string;  // Element Plus 图标组件名
  description?: string;
  tips: AdTip[];
}

export const AD_TIPS: AdTipCategory[] = [
  {
    id: 'newproduct',
    name: '新品推广',
    icon: 'MagicStick',
    description: '新品期打造自然流量的广告策略组合',
    tips: [
      {
        id: 'newproduct-1',
        title: '新品打造自然流量广告策略',
        content: `
**新品期广告组合策略总览**

通过四种广告类型的组合，以低成本高效探索流量，逐步沉淀出单关键词，最终稳定并提升自然排名。

| 广告组类型 | 匹配方式 | 竞价策略与出价 | 投放目标/定位 | 预算与位置调整 | 核心目的 |
|------------|----------|----------------|---------------|----------------|----------|
| 自动广告 | 紧密匹配 | 动态竞价-提高和降低；出价略低于建议出价 | 系统自动定位 | 每日预算 $10；搜索结果顶部增加百分比调整 | 探索流量，以低价跑出关键词及长尾流量订单 |
| 手动精准广告 | 精准匹配 | 固定竞价；出价略高于手动广泛广告的真实成交 CPC | 从广泛广告中筛选出的、需稳固自然排名位次的精准出单词 | 预算充足，确保出单饱和 | 承接精准出单词，稳定并推高关键词自然排名 |
| ASIN 定位广告 | 定位 ASIN | 固定竞价；从低价开始测试 | 挑选 3 个高度相似且销量较好的竞品 ASIN 进行单独管理 | 搜索结果页增加百分比调整 | 获取竞品搜索结果页流量，通过转化推广自然排名 |
| 手动广泛广告 | 广泛匹配 | 相对低的出价 | 自动广告和 ASIN 广告中所有已出单的关键词 | 采用广告位百分比形式进行调整 | 利用低价获取大量订单，持续沉淀新的出单关键词 |

**执行要点：**

1. **自动广告先行**：新品上架后首先开启自动广告，用较低出价探索市场，收集有效关键词
2. **数据驱动迁移**：将自动广告中出单的关键词迁移到手动广泛广告，继续低价收割
3. **精准词重点投放**：对于转化稳定的核心词，转入手动精准广告，用充足预算稳固自然排名
4. **ASIN 广告补充**：选择 3 个高度相似的竞品进行定位投放，抢占竞品流量

**预算分配建议：**

- 自动广告：$10/天（探索期）
- 手动广泛广告：根据出单词数量调整
- 手动精准广告：预算充足，优先保证出单
- ASIN 定位广告：$5-10/天，测试期可更低
        `
      },
    ]
  },
  {
    id: 'auto',
    name: '自动广告',
    icon: 'MagicStick',
    description: '自动广告投放策略与优化技巧',
    tips: [
      {
        id: 'auto-1',
        title: '新品期自动广告策略',
        content: `
**新品上架初期（1-4周）建议：**

1. **开启自动广告收集数据**
   - 预算建议：$15-30/天
   - 竞价策略：动态竞价-仅降低
   - 目的：收集关键词数据，了解市场

2. **关注指标**
   - 曝光量：判断 Listing 是否被收录
   - 点击率 (CTR)：低于 0.3% 需优化主图
   - 转化率：低于 5% 需优化详情页

3. **数据收集周期**
   - 至少运行 2 周再做判断
   - 每周下载搜索词报告分析
        `
      },
      {
        id: 'auto-2',
        title: '自动广告否定词策略',
        content: `
**何时添加否定词：**

- 点击 > 10 次，无转化
- ACOS > 目标值 2 倍
- 与产品完全不相关的词

**否定匹配类型选择：**

| 类型 | 使用场景 |
|------|----------|
| 精确否定 | 只否定特定词，保留相关变体 |
| 词组否定 | 否定包含该词组的所有搜索 |

**注意事项：**
- 不要过度否定，每周否定 5-10 个词即可
- 定期检查是否误否定了有效词
        `
      },
    ]
  },
  {
    id: 'manual',
    name: '手动广告',
    icon: 'Aim',
    description: '手动广告关键词选择与出价优化',
    tips: [
      {
        id: 'manual-1',
        title: '关键词匹配类型选择',
        content: `
**三种匹配类型对比：**

| 匹配类型 | 流量 | 精准度 | 建议竞价 |
|----------|------|--------|----------|
| 广泛匹配 | 大 | 低 | 基础价 |
| 词组匹配 | 中 | 中 | 基础价 ×1.2 |
| 精确匹配 | 小 | 高 | 基础价 ×1.5 |

**新手建议：**
- 先用精确匹配测试关键词
- 验证有效后再扩展到词组/广泛
        `
      },
      {
        id: 'manual-2',
        title: '竞价调整策略',
        content: `
**根据数据调整竞价：**

- **ACOS < 目标值**：可适当提高竞价，争取更多曝光
- **ACOS > 目标值 1.5 倍**：降低竞价 10-20%
- **无曝光**：检查竞价是否过低，参考建议竞价

**分时竞价技巧：**
- 转化高峰期（当地时间 19:00-23:00）可提高竞价
- 低效时段可降低竞价或暂停
        `
      },
    ]
  },
  {
    id: 'pickup',
    name: '捡漏广告',
    icon: 'Coin',
    description: '低成本获取长尾流量的技巧',
    tips: [
      {
        id: 'pickup-1',
        title: '全店自动捡漏广告',
        content: `
**适用范围：** 全店所有产品（不论品类）

**广告设置：**
- 匹配模式：自动广告（四种匹配类型全开）
- 竞价：**$0.02**
- 首页顶部溢价：**900%**
- 竞价方案：提高和降低

**核心优势：**
利用超低基础竞价配合高溢价，获取首页低价流量，实现全店产品捡漏。

**优化技巧：**
- 定期剔除点击后转化率极低的 SKU
- 保持广告组整体权重
- 通过自动跑出的词反哺手动广告
        `
      },
      {
        id: 'pickup-2',
        title: '同类 SKU 手动捡漏广告',
        content: `
**适用范围：** 所有同类 SKU

**广告设置：**
- 匹配模式：手动广泛匹配
- 竞价：**$0.02**
- 首页顶部溢价：**900%**
- 竞价方案：提高和降低

**关键词选取：**
通过关键词反查工具获取海量相关词（如 5000 个），尽可能多地投放。

**核心优势：**
通过同类 SKU 共享大批量关键词，以极低成本触达大量长尾曝光。

**优化技巧：**
- 词量过多需分批次建广告组
- 观察各词表现
- 将有曝光潜力的词单独提价测试
        `
      },
      {
        id: 'pickup-3',
        title: '单品出单词捡漏广告',
        content: `
**适用范围：** 单个特定产品

**广告设置：**
- 匹配模式：手动广泛匹配
- 竞价：**$0.02**
- 首页顶部溢价：**900%**
- 竞价方案：提高和降低

**关键词选取：**
选取该产品**所有历史出过单的关键词**。

**核心优势：**
对已验证的转化词进行低价"收割"，确保不遗漏任何低成本出单机会。

**优化技巧：**
随着转化积累，可逐步提高表现优异词的基础竞价以扩大规模。
        `
      },
      {
        id: 'pickup-4',
        title: '高频属性词根捡漏广告',
        content: `
**适用范围：** 单个特定产品

**广告设置：**
- 匹配模式：**手动词组匹配**
- 竞价：**$0.2**（固定竞价）

**关键词选取：**
统计出单词中的高频词根（如"户外"），筛选含该词根的多个关键词。

**核心优势：**
针对垂直细分场景进行精准低价投放，获取高转化潜力的精准流量。

**优化技巧：**
- 利用不同词根建立多个广告组
- 对比不同属性词根的转化效率
- 重点投入表现好的词根
        `
      },
      {
        id: 'pickup-5',
        title: '低价成本探索进阶优化法',
        content: `
**适用范围：** 精选关键词组

**广告设置：**
- 匹配模式：手动投放（广泛或词组）
- 初始竞价：**$0.2**（固定竞价）
- 无曝光则**每两天加 $0.1**，直到有曝光

**关键词选取：**
经过初步测试有转化潜力或高频出现的关键词。

**核心目的：**
探索每个关键词能拿到曝光的**最低竞价门槛**，彻底消除广告竞价中的溢价浪费。

**条件筛选：**
- 若关键词累计点击超 **10 次无转化** → 暂停
- 保留下来的即为最低竞价且高转化的主力词

**最终效果：**
建立一套"最低有效竞价"的关键词库，实现广告成本最优化。
        `
      },
      {
        id: 'pickup-6',
        title: '捡漏广告核心参数对照表',
        content: `
**五种捡漏策略参数对比：**

| 策略类型 | 匹配模式 | 竞价 | 溢价 | 竞价方案 |
|----------|----------|------|------|----------|
| 全店自动捡漏 | 自动（全开） | $0.02 | 首页900% | 提高和降低 |
| 同类SKU手动 | 手动广泛 | $0.02 | 首页900% | 提高和降低 |
| 单品出单词 | 手动广泛 | $0.02 | 首页900% | 提高和降低 |
| 高频词根 | 手动词组 | $0.2 | 无 | 固定竞价 |
| 低价探索法 | 手动 | $0.2起 | 无 | 固定竞价 |

**关键要点：**
- 超低竞价 + 高溢价 = 只争取首页优质流量
- 固定竞价 = 精确控制成本
- 海量关键词 = 广撒网捡漏
        `
      },
    ]
  },
  {
    id: 'acos',
    name: 'ACOS 优化',
    icon: 'DataAnalysis',
    description: 'ACOS 分析与优化方法',
    tips: [
      {
        id: 'acos-1',
        title: 'ACOS 目标设定',
        content: `
**ACOS 计算公式：**

\`\`\`
ACOS = 广告花费 / 广告销售额 × 100%
\`\`\`

**目标 ACOS 参考：**

| 产品阶段 | 建议 ACOS |
|----------|-----------|
| 新品推广期 | 可接受 50-80% |
| 成长期 | 30-50% |
| 成熟期 | 15-30% |
| 利润期 | < 15% |

**盈亏平衡 ACOS = 毛利率**
- 毛利率 30% → ACOS < 30% 才盈利
        `
      },
    ]
  },
  {
    id: 'budget',
    name: '预算分配',
    icon: 'Wallet',
    description: '广告预算规划与分配策略',
    tips: [
      {
        id: 'budget-1',
        title: '预算分配建议',
        content: `
**按广告类型分配：**

| 广告类型 | 预算占比 | 说明 |
|----------|----------|------|
| 手动精确 | 40-50% | 主力出单 |
| 手动广泛/词组 | 20-30% | 扩展流量 |
| 自动广告 | 15-20% | 数据收集 |
| 捡漏广告 | 5-10% | 低成本补充 |

**注意事项：**
- 根据实际数据动态调整
- 效果好的广告组可追加预算
- 避免预算过于分散
        `
      },
    ]
  },
];

/**
 * 搜索 Tips
 * @param keyword 搜索关键词
 * @returns 匹配的 Tips（包含分类信息）
 */
export function searchTips(keyword: string): Array<AdTip & { categoryName: string; categoryIcon: string }> {
  if (!keyword.trim()) return [];

  const lowerKeyword = keyword.toLowerCase();
  const results: Array<AdTip & { categoryName: string; categoryIcon: string }> = [];

  for (const category of AD_TIPS) {
    for (const tip of category.tips) {
      if (
        tip.title.toLowerCase().includes(lowerKeyword) ||
        tip.content.toLowerCase().includes(lowerKeyword)
      ) {
        results.push({
          ...tip,
          categoryName: category.name,
          categoryIcon: category.icon,
        });
      }
    }
  }

  return results;
}
